graph TB
    subgraph "Analytics Platform"
        subgraph "Frontend"
            AnalyticsUI[Analytics Dashboard<br/>Grafana-based]
        end

        subgraph "Data Pipeline"
            EventCollector[Event Collector<br/>Kafka/RabbitMQ]
            StreamProcessor[Stream Processor<br/>Real-time aggregation]
            BatchProcessor[Batch Processor<br/>Nightly rollups]
        end

        subgraph "Storage"
            ClickHouse[(ClickHouse<br/>Time-series analytics)]
            TimescaleDB[(TimescaleDB<br/>Metrics)]
        end

        subgraph "Analysis"
            MetricsService[Metrics Service<br/>KPIs, aggregations]
            ReportingService[Reporting Service<br/>PDF, CSV exports]
        end
    end

    subgraph "Data Sources"
        IDE5[IDE Events]
        Workflow5[Workflow Events]
        Backend5[Backend API Logs]
    end

    IDE5 -->|Send events| EventCollector
    Workflow5 -->|Send events| EventCollector
    Backend5 -->|Send logs| EventCollector

    EventCollector -->|Stream| StreamProcessor
    EventCollector -->|Batch| BatchProcessor

    StreamProcessor -->|Write| ClickHouse
    BatchProcessor -->|Write| TimescaleDB

    MetricsService -->|Query| ClickHouse
    ReportingService -->|Query| TimescaleDB
    AnalyticsUI -->|Visualize| MetricsService

    style ClickHouse fill:#BD10E0,stroke:#333,stroke-width:3px,color:#fff
    style MetricsService fill:#50E3C2,stroke:#333,stroke-width:2px