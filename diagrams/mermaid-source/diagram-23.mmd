graph TB
    subgraph "Provisioning Service"
        TriggerHandler[Provisioning Trigger<br/>New signup, tier change]

        subgraph "Resource Provisioning"
            NamespaceCreator[Create Namespace<br/>Isolated resources]
            DatabaseProvisioner[Database Provisioner<br/>Schema, users]
            StorageProvisioner[Storage Provisioner<br/>Workspace, quotas]
            APIKeyGenerator[API Key Generator]
        end

        subgraph "Configuration"
            QuotaSetter[Set Quotas<br/>Based on tier]
            PermissionSetter[Set Permissions<br/>RBAC rules]
            IntegrationSetup[Setup Integrations<br/>Git, SSO, etc.]
        end

        CompletionHandler[Provisioning Complete<br/>Send welcome email]
    end

    TriggerHandler -->|New Free user| NamespaceCreator
    TriggerHandler -->|New Team| DatabaseProvisioner
    TriggerHandler -->|New Enterprise| StorageProvisioner

    NamespaceCreator -->|Set limits| QuotaSetter
    DatabaseProvisioner -->|Set permissions| PermissionSetter
    StorageProvisioner -->|Configure| IntegrationSetup

    QuotaSetter -->|Generate| APIKeyGenerator
    PermissionSetter -->|Complete| CompletionHandler
    IntegrationSetup -->|Complete| CompletionHandler

    style TriggerHandler fill:#F5A623,stroke:#333,stroke-width:3px,color:#fff
    style CompletionHandler fill:#50E3C2,stroke:#333,stroke-width:2px